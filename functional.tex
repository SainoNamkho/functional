%  -*- coding: utf-8 -*-

\documentclass[oneside]{book}
\usepackage[a4paper,margin=2.5cm]{geometry}

\setlength{\parindent}{0pt}
\setlength{\parskip}{4pt plus 1pt minus 1pt}

\usepackage{functional}

\Functional{scoping=false,tracing=true}

\begin{document}

\chapter{Overview of Features}

\ExplSyntaxOn

\PrgNewFunction \IntMathSquare { m }
  {
    \IntSet \lTmpaInt { \IntEval { #1 * #1 } }
    \Result { \IntUse \lTmpaInt }
  }

\PrgNewFunction \IntMathCubic { m }
  {
    \IntSet \lTmpaInt { \IntEval { #1 * #1 * #1 } }
    \Result { \Value \lTmpaInt }
  }

\PrgNewFunction \IntMathFactorial { m }
  {
    \IntCompareTF { #1 } = { 0 }
      { \Result { 1 } }
      {
        \TlSet \lTmpaTl
          {
            \IntMathMultiply { #1 }
              { \IntMathFactorial { \IntMathSubtract{#1}{1} } }
          }
        \Result { \Value \lTmpaTl }
      }
  }

\ExplSyntaxOff

\IntMathSquare{5}
\IntMathSquare{\IntMathSquare{5}}

\IntMathCubic{2}
\IntMathCubic{\IntMathCubic{2}}

\IntMathFactorial{0}
\IntMathFactorial{4}

\chapter{Basic Definitions (\texttt{l3basics})}

\GobbleOne{abc} \UseOne{uvw}
\UseGobble{abc}{uvw} \GobbleUse{abc}{uvw}

\chapter{Control Structures (\texttt{l3prg})}

\BoolIfTF\cTrueBool{\Result{true}}{\Result{false}}
\BoolIfTF\cFalseBool{\Result{true}}{\Result{false}}

\BoolSetTrue\lTmpaBool
\BoolIfTF\lTmpaBool{\Result{true}}{\Result{false}}
\BoolSetFalse\lTmpaBool
\BoolIfTF\lTmpaBool{\Result{true}}{\Result{false}}

\chapter{Token Lists (\texttt{l3tl})}

\TlSet{\lTmpiTl}{\IntMathSquare{4}}

\TlSet{\lTmpaTl}{abc}
\TlSet{\lTmpbTl}{abc}
\TlSet{\lTmpcTl}{xyz}

\TlUse{\lTmpaTl}

\TlIfEqTF{\lTmpaTl}{\lTmpbTl}{\Result{first}}{\Result{second}}
\TlIfEqTF{\lTmpaTl}{\lTmpcTl}{\Result{first}}{\Result{second}}

\chapter{Integers (\texttt{l3int})}

\IntMathAdd{7}{3}
\IntMathSubtract{7}{3}
\IntMathMultiply{7}{3}
\IntMathDivide{7}{3}

\IntCompareTF{2}>{1}{\Result{first}}{\Result{second}}
\IntCompareTF{2}>{3}{\Result{first}}{\Result{second}}

\end{document}

