\documentclass{article}

\input{regression-test}
\AtBeginDocument{\START}
%\AtEndDocument{\END}

\usepackage{functional}
\Functional{tracing=true}

\begin{document}

\BEGINTEST{Testing \DimEval}
\DimEval {(1.2pt+3.4pt)/9}
\ENDTEST

\BEGINTEST{Testing \DimMathAdd}
\DimMathAdd {2.8pt} {3.7pt}
\DimMathAdd {3.8pt-1pt} {2.7pt+1pt}
\ENDTEST

\BEGINTEST{Testing \DimMathSub}
\DimMathSub {2.8pt} {3.7pt}
\DimMathSub {3.8pt-1pt} {2.7pt+1pt}
\ENDTEST

\BEGINTEST{Testing \DimMathRatio}
\DimMathRatio {5pt} {2pt}
\ENDTEST

\BEGINTEST{Testing \DimMathSign}
\DimMathSign {3.5pt}
\DimMathSign {-2.7pt}
\ENDTEST

\BEGINTEST{Testing \DimMathAbs}
\DimMathAbs {3.5pt}
\DimMathAbs {-2.7pt}
\ENDTEST

\BEGINTEST{Testing \DimMathMax}
\DimMathMax {3.5pt} {-2.7pt}
\ENDTEST

\BEGINTEST{Testing \DimMathMin}
\DimMathMin {3.5pt} {-2.7pt}
\ENDTEST

\BEGINTEST{Testing \DimConst}
\DimConst \cFooSomeDim {1cm}
\DimUse \cFooSomeDim
\ENDTEST

\BEGINTEST{Testing \DimLog}
\DimLog {\lTmpjDim}
\ENDTEST

\BEGINTEST{Testing \DimVarLog}
\DimVarLog \lTmpkDim
\ENDTEST

\BEGINTEST{Testing \DimSetEq}
\DimSetEq \lTmpaDim \cZeroDim
\DimUse \lTmpaDim
\DimSet \lTmpaDim {10pt}
\DimSetEq \lTmpbDim \lTmpaDim
\DimUse \lTmpbDim
\ENDTEST

\BEGINTEST{Testing \DimZero}
\DimSet \lTmpaDim {1em}
\DimZero \lTmpaDim
\DimUse \lTmpaDim
\ENDTEST

\BEGINTEST{Testing \DimZeroNew}
\DimZeroNew \lFooSomeDim
\DimUse \lFooSomeDim
\ENDTEST

\BEGINTEST{Testing \DimAdd}
\DimSet \lTmpaDim {5.3pt}
\DimAdd \lTmpaDim {2.11pt}
\DimUse \lTmpaDim
\ENDTEST

\BEGINTEST{Testing \DimSub}
\DimSet \lTmpaDim {5.3pt}
\DimSub \lTmpaDim {2.11pt}
\DimUse \lTmpaDim
\ENDTEST

\BEGINTEST{Testing \DimStepInline}
\IgnoreSpacesOn
\TlClear \lTmpaTl
\DimStepInline {1pt} {0.1pt} {1.5pt} {
  \TlPutRight \lTmpaTl {[#1]}
}
\Return {\Value\lTmpaTl}
\IgnoreSpacesOff
\ENDTEST

\BEGINTEST{Testing \DimStepVariable}
\IgnoreSpacesOn
\TlClear \lTmpaTl
\DimStepVariable {1pt} {0.1pt} {1.5pt} \lTmpiTl {
  \TlPutRight \lTmpaTl {\Value\lTmpiTl}
  \TlPutRight \lTmpaTl {~}
}
\Return {\Value\lTmpaTl}
\IgnoreSpacesOff
\ENDTEST

\BEGINTEST{Testing \DimIfExist}
\DimIfExistTF \lTmpaDim {\Return{Yes}} {\Return{No}}
\DimIfExistTF \lFooUndefinedDim {\Return{Yes}} {\Return{No}}
\ENDTEST

\BEGINTEST{Testing \DimCompare}
\DimCompareTF {1pt} > {0.9999pt} {\Return{Greater}} {\Return{Less}}
\DimCompareTF {1pt} > {1.0001pt} {\Return{Greater}} {\Return{Less}}
\ENDTEST

\BEGINTEST{Testing \DimCaseF}
\IgnoreSpacesOn
\DimSet \lTmpaDim {5pt}
\DimCaseF {2\lTmpaDim} {
  {5pt}     {\Return{Small}}
  {4pt+6pt} {\Return{Medium}}
  {-10pt}   {\Return{Negative}}
}{
  \Return {No Match}
}
\IgnoreSpacesOff
\ENDTEST

\BEGINTEST{Testing \DimCaseTF}
\IgnoreSpacesOn
\DimSet \lTmpaDim {5pt}
\DimCaseTF {2\lTmpaDim} {
  {5pt}     {\Return{Small}}
  {4pt+6pt} {\Return{Medium}}
  {-10pt}   {\Return{Negative}}
}{
  \Return {[Some Match]}
}{
  \Return {[No Match]}
}
\IgnoreSpacesOff
\ENDTEST

\end{document}
